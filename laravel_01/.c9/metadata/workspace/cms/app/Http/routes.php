{"filter":false,"title":"routes.php","tooltip":"/cms/app/Http/routes.php","undoManager":{"mark":40,"position":40,"stack":[[{"start":{"row":62,"column":3},"end":{"row":63,"column":0},"action":"insert","lines":["",""],"id":125}],[{"start":{"row":63,"column":0},"end":{"row":64,"column":0},"action":"insert","lines":["",""],"id":126}],[{"start":{"row":30,"column":44},"end":{"row":31,"column":0},"action":"insert","lines":["",""],"id":128},{"start":{"row":31,"column":0},"end":{"row":31,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":31,"column":4},"end":{"row":33,"column":28},"action":"insert","lines":["'item_number' => 'required | min:1 | max:3',","'item_amount' => 'required | max:6',","'published'   => 'required',"],"id":129}],[{"start":{"row":32,"column":0},"end":{"row":32,"column":4},"action":"insert","lines":["    "],"id":130}],[{"start":{"row":32,"column":4},"end":{"row":32,"column":8},"action":"insert","lines":["    "],"id":131}],[{"start":{"row":32,"column":4},"end":{"row":32,"column":8},"action":"remove","lines":["    "],"id":132}],[{"start":{"row":33,"column":0},"end":{"row":33,"column":4},"action":"insert","lines":["    "],"id":133}],[{"start":{"row":44,"column":40},"end":{"row":45,"column":0},"action":"insert","lines":["",""],"id":134}],[{"start":{"row":45,"column":0},"end":{"row":46,"column":0},"action":"insert","lines":["",""],"id":135}],[{"start":{"row":45,"column":0},"end":{"row":48,"column":42},"action":"insert","lines":[" ","$books->item_number = $request->item_number;","$books->item_amount = $request->item_amount;","$books->published   = $request->published;"],"id":136}],[{"start":{"row":48,"column":42},"end":{"row":49,"column":0},"action":"insert","lines":["",""],"id":137}],[{"start":{"row":34,"column":3},"end":{"row":35,"column":0},"action":"insert","lines":["",""],"id":139}],[{"start":{"row":35,"column":0},"end":{"row":36,"column":0},"action":"insert","lines":["",""],"id":140}],[{"start":{"row":36,"column":0},"end":{"row":38,"column":3},"action":"insert","lines":["Route::post('/books/update', function(Request $request){","//バリデーション","});"],"id":141}],[{"start":{"row":36,"column":0},"end":{"row":38,"column":3},"action":"remove","lines":["Route::post('/books/update', function(Request $request){","//バリデーション","});"],"id":142},{"start":{"row":36,"column":0},"end":{"row":39,"column":3},"action":"insert","lines":["//更新処理","Route::post('/books/update', function(Request $request){","//バリデーション","});"]}],[{"start":{"row":38,"column":11},"end":{"row":39,"column":0},"action":"insert","lines":["",""],"id":143}],[{"start":{"row":39,"column":0},"end":{"row":59,"column":25},"action":"insert","lines":["$validator = Validator::make($request->all(), [","        'id' => 'required',","        'item_name' => 'required|min:3|max:255',","        'item_number' => 'required|min:1|max:3',","        'item_amount' => 'required|max:6',","        'published' => 'required',","]);","//バリデーション:エラー","    if ($validator->fails()) {","        return redirect('/')","            ->withInput()","            ->withErrors($validator);","}","//データ更新","    $books = Books::find($request->id);","    $books->item_name   = $request->item_name;","    $books->item_number = $request->item_number;","    $books->item_amount = $request->item_amount;","    $books->published   = $request->published;","    $books->save();","    return redirect('/');"],"id":144}],[{"start":{"row":75,"column":0},"end":{"row":76,"column":0},"action":"remove","lines":["",""],"id":145}],[{"start":{"row":39,"column":0},"end":{"row":39,"column":4},"action":"insert","lines":["    "],"id":146}],[{"start":{"row":45,"column":0},"end":{"row":45,"column":4},"action":"insert","lines":["    "],"id":147}],[{"start":{"row":62,"column":0},"end":{"row":67,"column":0},"action":"remove","lines":["if ($validator->fails()) {","    return redirect('/')","        ->withInput()","        ->withErrors($validator);","}",""],"id":148}],[{"start":{"row":61,"column":0},"end":{"row":62,"column":0},"action":"remove","lines":["",""],"id":149}],[{"start":{"row":60,"column":3},"end":{"row":61,"column":0},"action":"insert","lines":["",""],"id":150}],[{"start":{"row":61,"column":0},"end":{"row":62,"column":0},"action":"insert","lines":["",""],"id":151}],[{"start":{"row":62,"column":0},"end":{"row":63,"column":0},"action":"insert","lines":["",""],"id":152}],[{"start":{"row":63,"column":0},"end":{"row":64,"column":0},"action":"insert","lines":["",""],"id":153}],[{"start":{"row":35,"column":0},"end":{"row":36,"column":0},"action":"insert","lines":["",""],"id":154}],[{"start":{"row":36,"column":0},"end":{"row":37,"column":0},"action":"insert","lines":["",""],"id":155}],[{"start":{"row":37,"column":0},"end":{"row":38,"column":0},"action":"insert","lines":["",""],"id":156}],[{"start":{"row":69,"column":0},"end":{"row":69,"column":3},"action":"insert","lines":["// "],"id":159},{"start":{"row":70,"column":0},"end":{"row":70,"column":3},"action":"insert","lines":["// "]},{"start":{"row":71,"column":0},"end":{"row":71,"column":3},"action":"insert","lines":["// "]},{"start":{"row":73,"column":0},"end":{"row":73,"column":3},"action":"insert","lines":["// "]},{"start":{"row":74,"column":0},"end":{"row":74,"column":3},"action":"insert","lines":["// "]},{"start":{"row":75,"column":0},"end":{"row":75,"column":3},"action":"insert","lines":["// "]},{"start":{"row":77,"column":0},"end":{"row":77,"column":3},"action":"insert","lines":["// "]},{"start":{"row":78,"column":0},"end":{"row":78,"column":3},"action":"insert","lines":["// "]},{"start":{"row":79,"column":0},"end":{"row":79,"column":3},"action":"insert","lines":["// "]},{"start":{"row":80,"column":0},"end":{"row":80,"column":3},"action":"insert","lines":["// "]},{"start":{"row":81,"column":0},"end":{"row":81,"column":3},"action":"insert","lines":["// "]},{"start":{"row":82,"column":0},"end":{"row":82,"column":3},"action":"insert","lines":["// "]},{"start":{"row":84,"column":0},"end":{"row":84,"column":3},"action":"insert","lines":["// "]},{"start":{"row":85,"column":0},"end":{"row":85,"column":3},"action":"insert","lines":["// "]}],[{"start":{"row":54,"column":1},"end":{"row":55,"column":0},"action":"insert","lines":["",""],"id":160}],[{"start":{"row":54,"column":0},"end":{"row":54,"column":4},"action":"insert","lines":["    "],"id":161}],[{"start":{"row":70,"column":0},"end":{"row":86,"column":6},"action":"remove","lines":["// // Booksテーブル","// $books = new Books;","// $books->item_name = $request->item_name;"," ","// $books->item_number = $request->item_number;","// $books->item_amount = $request->item_amount;","// $books->published   = $request->published;","","// $books->item_number = $request->item_number;","// $books->item_number = '1';","// $books->item_amount = '1000';","// $books->published = '2017-03-07 00:00:00';","// $books->save();//「/」ルートにリダイレクト","// return redirect('/');","","// //","// });"],"id":162}],[{"start":{"row":35,"column":0},"end":{"row":51,"column":6},"action":"insert","lines":["// // Booksテーブル","// $books = new Books;","// $books->item_name = $request->item_name;"," ","// $books->item_number = $request->item_number;","// $books->item_amount = $request->item_amount;","// $books->published   = $request->published;","","// $books->item_number = $request->item_number;","// $books->item_number = '1';","// $books->item_amount = '1000';","// $books->published = '2017-03-07 00:00:00';","// $books->save();//「/」ルートにリダイレクト","// return redirect('/');","","// //","// });"],"id":163}],[{"start":{"row":35,"column":0},"end":{"row":35,"column":3},"action":"remove","lines":["// "],"id":164},{"start":{"row":36,"column":0},"end":{"row":36,"column":3},"action":"remove","lines":["// "]},{"start":{"row":37,"column":0},"end":{"row":37,"column":3},"action":"remove","lines":["// "]},{"start":{"row":39,"column":0},"end":{"row":39,"column":3},"action":"remove","lines":["// "]},{"start":{"row":40,"column":0},"end":{"row":40,"column":3},"action":"remove","lines":["// "]},{"start":{"row":41,"column":0},"end":{"row":41,"column":3},"action":"remove","lines":["// "]},{"start":{"row":43,"column":0},"end":{"row":43,"column":3},"action":"remove","lines":["// "]},{"start":{"row":44,"column":0},"end":{"row":44,"column":3},"action":"remove","lines":["// "]},{"start":{"row":45,"column":0},"end":{"row":45,"column":3},"action":"remove","lines":["// "]},{"start":{"row":46,"column":0},"end":{"row":46,"column":3},"action":"remove","lines":["// "]},{"start":{"row":47,"column":0},"end":{"row":47,"column":3},"action":"remove","lines":["// "]},{"start":{"row":48,"column":0},"end":{"row":48,"column":3},"action":"remove","lines":["// "]},{"start":{"row":50,"column":0},"end":{"row":50,"column":3},"action":"remove","lines":["// "]},{"start":{"row":51,"column":0},"end":{"row":51,"column":3},"action":"remove","lines":["// "]}],[{"start":{"row":34,"column":0},"end":{"row":34,"column":4},"action":"insert","lines":["    "],"id":165}],[{"start":{"row":30,"column":0},"end":{"row":30,"column":4},"action":"insert","lines":["    "],"id":166},{"start":{"row":31,"column":0},"end":{"row":31,"column":4},"action":"insert","lines":["    "]},{"start":{"row":32,"column":0},"end":{"row":32,"column":4},"action":"insert","lines":["    "]},{"start":{"row":33,"column":0},"end":{"row":33,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":35,"column":0},"end":{"row":35,"column":4},"action":"insert","lines":["    "],"id":167},{"start":{"row":36,"column":0},"end":{"row":36,"column":4},"action":"insert","lines":["    "]},{"start":{"row":37,"column":0},"end":{"row":37,"column":4},"action":"insert","lines":["    "]},{"start":{"row":38,"column":0},"end":{"row":38,"column":4},"action":"insert","lines":["    "]},{"start":{"row":39,"column":0},"end":{"row":39,"column":4},"action":"insert","lines":["    "]},{"start":{"row":40,"column":0},"end":{"row":40,"column":4},"action":"insert","lines":["    "]},{"start":{"row":41,"column":0},"end":{"row":41,"column":4},"action":"insert","lines":["    "]},{"start":{"row":42,"column":0},"end":{"row":42,"column":4},"action":"insert","lines":["    "]},{"start":{"row":43,"column":0},"end":{"row":43,"column":4},"action":"insert","lines":["    "]},{"start":{"row":44,"column":0},"end":{"row":44,"column":4},"action":"insert","lines":["    "]},{"start":{"row":45,"column":0},"end":{"row":45,"column":4},"action":"insert","lines":["    "]},{"start":{"row":46,"column":0},"end":{"row":46,"column":4},"action":"insert","lines":["    "]},{"start":{"row":47,"column":0},"end":{"row":47,"column":4},"action":"insert","lines":["    "]},{"start":{"row":48,"column":0},"end":{"row":48,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":49,"column":0},"end":{"row":50,"column":2},"action":"remove","lines":["","//"],"id":168}],[{"start":{"row":48,"column":25},"end":{"row":49,"column":0},"action":"remove","lines":["",""],"id":169}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":9,"column":28},"end":{"row":9,"column":28},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1499154343982,"hash":"4e54c57547ab054d2765c52d8adf1340f5b10bf3"}